# AI Agent Workforce - Work Plan
**Generated**: 2025-10-06  
**Manager**: AI Agent Workforce Orchestrator  
**Status**: Active  
**Concurrency**: 3 parallel tasks (default)

---

## Executive Summary

This plan prioritizes tasks from `/agents/tasks.yaml` based on:
- **Impact**: User-facing features > internal improvements
- **Dependencies**: Blockers resolved first
- **Effort**: Balanced mix of quick wins and substantial features
- **Risk**: High-risk items get extra review

### Current Task Inventory
- **Features**: 2 tasks
- **Bugs**: 1 task
- **Maintenance**: 1 task
- **Docs**: 1 task
- **Security**: 1 task

**Total**: 6 tasks identified

---

## Priority Queue

### Wave 1: Immediate (Slots 1-3)

#### [Slot 1] üî¥ HIGH PRIORITY: Bug Fix - `view-textnode`
**Task ID**: `view-textnode`  
**Type**: Bug  
**Assigned to**: Engineer ‚Üí Tester  
**Branch**: `ai/engineer/fix-view-textnode`  
**Estimated LOC**: ~50  
**Risk**: LOW  

**Problem**: Stray text nodes causing "Unexpected text node in <View>" warnings.

**Acceptance Criteria**:
- [x] Enable ESLint rule `react-native/no-raw-text`
- [ ] Fix all occurrences of raw text in `<View>` components
- [ ] Add regression test to prevent recurrence

**Implementation Steps**:
1. Engineer: Update ESLint config to enable rule
2. Engineer: Scan codebase for violations: `npm run lint`
3. Engineer: Wrap text nodes in `<Text>` components
4. Tester: Add lint rule test in CI
5. Tester: Add unit test for affected components

**Files to Check**:
- `app/components/*.tsx`
- `components/*.tsx`
- `.eslintrc` or `eslint.config.js`

**Timeline**: 2-3 hours  
**Status**: üü° Ready to start

---

#### [Slot 2] üü† MEDIUM PRIORITY: Maintenance - `scripts-ci-align`
**Task ID**: `scripts-ci-align`  
**Type**: Maintenance  
**Assigned to**: Engineer  
**Branch**: `ai/engineer/ci-scripts-setup`  
**Estimated LOC**: ~100  
**Risk**: LOW  

**Problem**: Ensure all required CI scripts exist and are properly configured.

**Acceptance Criteria**:
- [ ] Verify `npm run lint` works
- [ ] Verify `npm run typecheck` works
- [ ] Verify `npm run test` works
- [ ] Verify `npm run web:build` works
- [ ] Verify `npm run e2e` works
- [ ] Document script usage in README

**Implementation Steps**:
1. Engineer: Audit package.json scripts (already done ‚úÖ)
2. Engineer: Test each script locally
3. Engineer: Add missing configs if needed
4. Docs: Update README with script documentation

**Current Status**:
```json
‚úÖ "lint": "expo lint"
‚úÖ "typecheck": "tsc -p tsconfig.json --noEmit"
‚úÖ "test": "jest"
‚úÖ "web:build": "expo export --platform web"
‚úÖ "e2e": "playwright test --reporter=line"
```

**Timeline**: 1-2 hours  
**Status**: üü¢ Scripts already exist; just needs validation + docs

---

#### [Slot 3] üü¢ LOW PRIORITY: Feature - `lang-search`
**Task ID**: `lang-search`  
**Type**: Feature  
**Assigned to**: Engineer ‚Üí Tester ‚Üí Docs  
**Branch**: `ai/engineer/lang-search-iso`  
**Estimated LOC**: ~150  
**Risk**: LOW  

**Problem**: Add language search with ISO code filtering and keyboard navigation.

**Acceptance Criteria**:
- [ ] Filter by name or ISO code (e.g., "en", "pa-IN")
- [ ] Keyboard navigation support
- [ ] ARIA roles and labels for accessibility

**Implementation Steps**:
1. Engineer: Locate language picker component
2. Engineer: Add ISO code filtering logic
3. Engineer: Implement keyboard navigation (arrow keys, Enter)
4. Engineer: Add ARIA attributes
5. Tester: RTL tests for filtering and selection
6. Tester: Keyboard navigation tests
7. Docs: Update README with usage examples

**Files to Check**:
- `app/components/LanguagePicker.tsx` or similar
- `modules/languages/*`
- `app/onboarding.tsx`

**Timeline**: 3-4 hours  
**Status**: üü° Ready to start

---

### Wave 2: Next Up (On Deck)

#### [On Deck] üîµ Feature - `translator-stt`
**Task ID**: `translator-stt`  
**Type**: Feature  
**Assigned to**: Engineer ‚Üí Tester ‚Üí Security ‚Üí Docs  
**Branch**: `ai/engineer/stt-integration`  
**Estimated LOC**: ~300  
**Risk**: MEDIUM  

**Problem**: Add speech-to-text input (Expo-compatible, no native deps).

**Acceptance Criteria**:
- [ ] Web uses Web Speech API with permission prompt
- [ ] Mobile (Expo Go): fallback to `/api/stt` or show tooltip
- [ ] Mic button states: idle/recording/processing with pulse animation
- [ ] Debounced insertion; cancel/resume support; error toasts

**Implementation Steps**:
1. Engineer: Create STT provider abstraction (`lib/stt/provider.ts`)
2. Engineer: Implement Web Speech API provider
3. Engineer: Implement server STT fallback
4. Engineer: Create `useMicInput` hook with state machine
5. Engineer: Build `MicButton` component with accessibility
6. Engineer: Add backend route `/api/stt` (mock-first)
7. Tester: Hook state machine tests
8. Tester: RTL tests with mocked providers
9. Tester: MSW contract test for `/api/stt`
10. Security: Validate audio input size limits
11. Security: Add rate limiting on STT endpoint
12. Docs: README section "Voice Input Modes" with env toggles

**Files to Create/Modify**:
- `lib/stt/` (new directory)
- `hooks/useMicInput.ts`
- `components/MicButton.tsx`
- `backend/routes/stt.ts`
- `__tests__/useMicInput.test.ts`
- `tests/msw/handlers.ts`

**Timeline**: 8-10 hours  
**Status**: üü° Waiting for Wave 1 completion

**Notes**: This is a substantial feature. According to README, STT scaffolding already exists. Need to verify current state before proceeding.

---

#### [On Deck] üü£ Security - `input-validation`
**Task ID**: `input-validation`  
**Type**: Security  
**Assigned to**: Security ‚Üí Engineer  
**Branch**: `ai/security/zod-validation`  
**Estimated LOC**: ~200  
**Risk**: MEDIUM  

**Problem**: Add Zod validation for user inputs and tRPC boundaries.

**Acceptance Criteria**:
- [ ] All tRPC procedures have Zod input schemas
- [ ] User form inputs validated
- [ ] API responses validated where applicable
- [ ] Type inference from schemas (no duplicate types)

**Implementation Steps**:
1. Security: Audit tRPC routes for missing validation
2. Security: Audit form inputs for missing validation
3. Engineer: Add Zod schemas to tRPC procedures
4. Engineer: Add Zod schemas to forms
5. Tester: Test invalid input handling
6. Docs: Document validation patterns

**Files to Check**:
- `backend/routes/*.ts`
- `app/components/*Form*.tsx`
- `schemas/` directory

**Timeline**: 4-5 hours  
**Status**: üü° Waiting for Wave 1 completion

---

#### [On Deck] üìù Docs - `contributor-guide`
**Task ID**: `contributor-guide`  
**Type**: Documentation  
**Assigned to**: Docs  
**Branch**: `ai/docs/contributor-guide`  
**Estimated LOC**: N/A (documentation)  
**Risk**: LOW  

**Problem**: Create comprehensive contributor guide for RN + Agents workflow.

**Acceptance Criteria**:
- [ ] Getting started instructions
- [ ] Architecture overview
- [ ] Coding standards
- [ ] Testing guidelines
- [ ] PR workflow
- [ ] Agent system usage

**Implementation Steps**:
1. Docs: Create `CONTRIBUTING.md`
2. Docs: Document architecture (Expo RN + tRPC + Hono)
3. Docs: Explain agent workflow
4. Docs: Add examples of common tasks
5. Docs: Link from main README

**Files to Create**:
- `CONTRIBUTING.md`
- `docs/architecture.md` (optional)

**Timeline**: 3-4 hours  
**Status**: üü° Waiting for Wave 1 completion

---

## Execution Strategy

### Phase 1: Foundation (Current Wave)
Focus on critical bug fixes and maintenance before new features.

**Rationale**: 
- Bug `view-textnode` is causing console warnings ‚Üí affects dev experience
- CI script validation ensures quality gates work
- `lang-search` is low-risk, high-value feature

### Phase 2: Advanced Features (Next Wave)
Roll out larger features with proper coordination.

**Rationale**:
- STT feature is complex ‚Üí needs full Engineer/Tester/Security/Docs cycle
- Security validation should happen before new features add more surface area
- Contributor guide helps onboard new developers/agents

### Concurrency Management
- **Current**: 3 tasks in progress (Slots 1-3)
- **Next**: When any slot completes, pull from "On Deck"
- **Override**: If urgent bug reported, preempt lowest priority slot

---

## Quality Gates

### Before PR Creation
All tasks must pass:
```bash
npm run lint           # ‚úÖ
npm run typecheck      # ‚úÖ
npm run test -- --coverage  # ‚úÖ (85%+ diff coverage)
```

### Before Merge
- [ ] PR template fully filled out
- [ ] Security review complete
- [ ] Documentation updated
- [ ] All CI checks green
- [ ] Peer review (if not `ai:autonomous`)

---

## Risk Matrix

| Task ID | Risk Level | Mitigation |
|---------|------------|------------|
| `view-textnode` | LOW | Lint rule catches regressions |
| `scripts-ci-align` | LOW | No code changes; validation only |
| `lang-search` | LOW | Isolated feature; well-tested |
| `translator-stt` | MEDIUM | Mock-first; no native deps; extensive tests |
| `input-validation` | MEDIUM | Breaking changes possible; rollout gradually |
| `contributor-guide` | LOW | Documentation only |

---

## Metrics & KPIs

### Velocity Tracking
- **Tasks completed**: 0 / 6
- **PRs opened**: 0
- **PRs merged**: 0
- **Average PR size**: Target ‚â§300 LOC
- **Test coverage**: Target ‚â•85% diff coverage

### Quality Metrics
- **Lint violations**: 0
- **TypeScript errors**: 0
- **Failing tests**: 0
- **Security issues flagged**: TBD

---

## Next Actions

### Immediate (Today)
1. ‚úÖ Bootstrap agent infrastructure (COMPLETE)
2. üü° **Manager**: Spawn Slot 1 - `view-textnode` bug fix
3. üü° **Manager**: Spawn Slot 2 - `scripts-ci-align` validation
4. üü° **Manager**: Spawn Slot 3 - `lang-search` feature

### Tomorrow
- Monitor Wave 1 progress
- Review PRs as they come in
- Prepare Wave 2 task briefs

### This Week
- Complete Wave 1 (3 tasks)
- Start Wave 2 (1-2 tasks)
- Update this plan with progress notes

---

## Communication Protocol

### Status Updates
- **Daily**: Update this plan with task statuses
- **PR Events**: Notify relevant agents when PRs are opened/merged
- **Blockers**: Escalate immediately to Manager

### Agent Coordination
- Engineer opens PR ‚Üí tags Tester for review
- Tester completes tests ‚Üí tags Security for scan
- Security approves ‚Üí tags Docs for final check
- Docs approves ‚Üí Manager merges

---

## Open Questions

1. **STT Implementation**: README suggests STT scaffolding exists. Should we audit before starting `translator-stt` task?
2. **Autonomy Labels**: No GitHub issues with `ai:planned` or `ai:autonomous` found. Should we create them?
3. **Validation Priority**: Should `input-validation` be moved to Wave 1 as a security baseline?

---

## Archive Policy

When all tasks complete:
- Move this plan to `/agents/archive/PLAN-2025-10-06-0000.md`
- Create new plan for next cycle
- Extract lessons learned for process improvement

---

**Plan Status**: üü¢ ACTIVE  
**Last Updated**: 2025-10-06 00:00 UTC  
**Next Review**: 2025-10-07 00:00 UTC

---

## Appendix: Agent Prompts

- Manager: `/agents/prompts/manager.md`
- Engineer: `/agents/prompts/engineer.md`
- Tester: `/agents/prompts/tester.md`
- Docs: `/agents/prompts/docs.md`
- Security: `/agents/prompts/security.md`

## Appendix: Task Definitions

Full task specs: `/agents/tasks.yaml`
